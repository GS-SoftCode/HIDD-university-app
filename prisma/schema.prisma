generator client_main {
  provider = "prisma-client-js"
  output   = "../prisma/clients/prisma-main-client"
}

datasource db_main {
  provider = "postgresql"
  
}

model Carrera {
  id_carrera Int      @id @default(autoincrement())
  nombre     String
  duracion   Int
  facultad   String

  ciclos     Ciclo[]
  estudiantes Estudiante[]
}

model Ciclo {
  id_ciclo   Int     @id @default(autoincrement())
  nombre     String
  numero     Int
  id_carrera Int

  carrera    Carrera @relation(fields: [id_carrera], references: [id_carrera])
  materias   Materia[]
}

model Materia {
  id_materia Int     @id @default(autoincrement())
  nombre     String
  codigo     String  @unique
  creditos   Int
  id_ciclo   Int

  ciclo      Ciclo   @relation(fields: [id_ciclo], references: [id_ciclo])
  docentes   Docente_Materia[]
  estudiantes Estudiante_Materia[]
}

model Estudiante {
  id_estudiante Int     @id @default(autoincrement())
  nombre        String
  apellido      String
  correo        String  @unique
  password      String
  fecha_nacimiento DateTime
  id_carrera    Int

  carrera       Carrera @relation(fields: [id_carrera], references: [id_carrera])
  materias      Estudiante_Materia[]
}

model Docente {
  id_docente   Int     @id @default(autoincrement())
  nombre       String
  apellido     String
  correo       String  @unique
  especialidad String

  materias     Docente_Materia[]
}

model Docente_Materia {
  id_docente Int
  id_materia Int

  docente    Docente @relation(fields: [id_docente], references: [id_docente])
  materia    Materia @relation(fields: [id_materia], references: [id_materia])

  @@id([id_docente, id_materia])
}

model Estudiante_Materia {
  id_estudiante Int
  id_materia    Int
  fecha_inscripcion DateTime

  estudiante Estudiante @relation(fields: [id_estudiante], references: [id_estudiante])
  materia    Materia    @relation(fields: [id_materia], references: [id_materia])

  @@id([id_estudiante, id_materia])
}
